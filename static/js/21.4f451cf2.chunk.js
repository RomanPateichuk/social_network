"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[21],{4021:(s,e,t)=>{t.r(e),t.d(e,{default:()=>N});var o=t(2791);const r="MyPosts_postsBlock__QtAaA",i="MyPosts_posts__jNgzV",n="MyPost_item__dJ1K8";var l=t(184);const a=s=>(0,l.jsxs)("div",{className:n,children:[(0,l.jsx)("img",{src:"https://klike.net/uploads/posts/2021-08/1629443054_1.jpg",alt:"post"}),s.message,(0,l.jsx)("div",{children:(0,l.jsxs)("span",{children:["like ",s.likesCount]})})]});var d=t(704),c=t(3079),u=t(5413);const h=(0,d.Z)({form:"postAddForm"})((s=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,u.SP)("Your post","newPostText",[c.C],u.gx),(0,l.jsx)("div",{children:(0,l.jsx)("button",{children:"Add post"})})]})}))),p=s=>{let e=s.posts.map((s=>(0,l.jsx)(a,{message:s.message,likesCount:s.likesCount},s.id)));return(0,l.jsxs)("div",{className:r,children:[(0,l.jsx)("h3",{children:"My posts"}),(0,l.jsx)(h,{onSubmit:e=>{s.addPost(e.newPostText)}}),(0,l.jsx)("div",{className:i,children:e})]})},j=o.memo(p);var x=t(4294),f=t(8687);const v=(0,f.$j)((s=>({posts:s.profilePage.posts})),{addPost:x.Nw.addPostActionCreator})(j);var m=t(759);const b="ProfileInfo_descriptionBlock__nhWDU";var g=t(3193);const P=s=>{let[e,t]=(0,o.useState)(!1),[r,i]=(0,o.useState)(s.status);(0,o.useEffect)((()=>{i(s.status)}),[s.status]);return(0,l.jsxs)("div",{children:[!e&&(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Status: "}),(0,l.jsx)("span",{onDoubleClick:()=>{t(!0)},children:r||"No status..."})]}),e&&(0,l.jsx)("div",{children:(0,l.jsx)("input",{onChange:s=>{i(s.currentTarget.value)},autoFocus:!0,onBlur:()=>{t(!1),s.updateStatus(r)},value:r})})]})};var k=t(9234);const S=(0,d.Z)({form:"edit-profile"})((s=>{let{profile:e,handleSubmit:t,error:o}=s;return(0,l.jsxs)("form",{onSubmit:t,children:[o&&(0,l.jsx)("div",{className:k.Z.form_summary_error,children:o}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{children:"save"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Full name: "})," ",(0,u.SP)("Full name","fullName",[],u.II)]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"About me: "})," ",(0,u.SP)("About me","aboutMe",[],u.gx)]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Looking for a job: "}),(0,u.SP)("","lookingForAJob",[],u.II,{type:"checkbox"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"My professioanal skills: "})," ",(0,u.SP)("My professionak skills","lookingForAJobDescription",[],u.gx)]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Contacts: "})," ",Object.keys(e.contacts).map((s=>(0,l.jsx)("div",{children:(0,l.jsxs)("b",{children:[s,": ",(0,u.SP)(s,"contacts."+s,[],u.II)]})},s)))]})]})})),A=s=>{let{profile:e,isOwner:t,goToEditMode:o}=s;return(0,l.jsxs)("div",{children:[t&&(0,l.jsx)("div",{children:(0,l.jsx)("button",{onClick:o,children:"edit"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Full name: "})," ",e.fullName]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"About me: "})," ",e.aboutMe]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Looking for a job: "}),e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"My professioanal skills: "})," ",e.lookingForAJobDescription]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Contacts: "})," ",Object.keys(e.contacts).map((s=>(0,l.jsx)(_,{contactTitle:s,contactValue:e.contacts[s]},s)))]})]})},_=s=>{let{contactTitle:e,contactValue:t}=s;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("b",{children:[e,":"]}),t]})},C=s=>{let{profile:e,status:t,updateStatus:r,isOwner:i,savePhoto:n,saveProfile:a}=s,[d,c]=(0,o.useState)(!1);if(!e)return(0,l.jsx)(m.Z,{});return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:b,children:[(0,l.jsx)("img",{src:e.photos.large||g,alt:""}),i&&(0,l.jsx)("input",{type:"file",onChange:s=>{var e;null!==(e=s.target.files)&&void 0!==e&&e.length&&n(s.target.files[0])}}),d?(0,l.jsx)(S,{initialValues:{fullName:e.fullName,aboutMe:e.aboutMe,lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription,contacts:{...e.contacts}},onSubmit:s=>{a(s).then((()=>{c(!1)}))},profile:e}):(0,l.jsx)(A,{profile:e,isOwner:i,goToEditMode:()=>{c(!0)}}),(0,l.jsx)(P,{status:t,updateStatus:r})]})})},F=s=>(0,l.jsxs)("div",{children:[(0,l.jsx)(C,{profile:s.profile,status:s.status,updateStatus:s.updateStatus,isOwner:s.isOwner,savePhoto:s.savePhoto,saveProfile:s.saveProfile}),(0,l.jsx)(v,{})]});var I=t(7689);var M=t(1548),w=t(97);class y extends o.Component{refreshProfile(){let s=+this.props.params.userId;s||(s=this.props.authorizedUserId),this.props.getUserProfile(s),this.props.getStatus(s)}componentDidMount(){this.refreshProfile()}componentDidUpdate(s,e){this.props.params.userId!==s.params.userId&&this.refreshProfile()}render(){return(0,l.jsx)(F,{...this.props,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})}}const N=(0,w.qC)((0,f.$j)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth})),{getUserProfile:x.et,getStatus:x.lR,updateStatus:x.Nf,savePhoto:x.Ju,saveProfile:x.Ii}),(function(s){return function(e){let t=(0,I.TH)(),o=(0,I.s0)(),r=(0,I.UO)();return(0,l.jsx)(s,{...e,location:t,params:r,navigate:o})}}),M.D)(y)},1548:(s,e,t)=>{t.d(e,{D:()=>a});var o=t(2791),r=t(7689),i=t(8687),n=t(184);let l=s=>({isAuth:s.auth.isAuth});const a=s=>{class e extends o.Component{render(){return this.props.isAuth?(0,n.jsx)(s,{...this.props}):(0,n.jsx)(r.Fg,{to:"/login"})}}return(0,i.$j)(l)(e)}}}]);
//# sourceMappingURL=21.4f451cf2.chunk.js.map